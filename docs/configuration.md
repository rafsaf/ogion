---
hide:
  - toc
---

# Configuration

Environemt variables

| Name                      | Type                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Default         |
| :------------------------ | :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------- |
| AGE_RECIPIENTS            | string[**required**] | [AGE](https://github.com/FiloSottile/age) public keys. Can be many splitted by comma. Note those must be **public** keys. Keep you private keys safe.                                                                                                                                                                                                                                                                                                                                                                                                            | -               |
| BACKUP_PROVIDER           | string[**required**] | See `Providers` chapter, choosen backup provider for example [GCS](./providers/google_cloud_storage.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                         | -               |
| INSTANCE_NAME             | string               | Name of this ogion instance, will be used for example when sending fail messages. Defaults to system hostname.                                                                                                                                                                                                                                                                                                                                                                                                                                                   | system hostname |
| BACKUP_MAX_NUMBER         | int                  | Soft limit how many backups can live at once for backup target. Defaults to `7`. This must makes sense with cron expression you use. For example if you want to have `7` day retention, and make backups at 5:00, `max_backups=7` is fine, but if you make `4` backups per day, you would need `max_backups=28`. Limit is soft and can be exceeded if no backup is older than value specified in `min_retention_days` in backup target. Note this global default and can be overwritten by using `max_backups` param in specific targets. Min `1` and max `998`. | 7               |
| BACKUP_MIN_RETENTION_DAYS | int                  | Hard minimum backups lifetime in days. Ogion won't ever delete files before, regardles of other options. Note this global default and can be overwritten by using `min_retention_days` param in specific targets. Min `0` and max `36600`.                                                                                                                                                                                                                                                                                                                       | 3               |
| POSTGRESQL\_...           | backup target syntax | PostgreSQL database target, see [PostgreSQL](./backup_targets/postgresql.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | -               |
| MARIADB\_...              | backup target syntax | MariaDB database target, see [MariaDB](./backup_targets/mariadb.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | -               |
| SINGLEFILE\_...           | backup target syntax | Single file database target, see [Single file](./backup_targets/file.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | -               |
| DIRECTORY\_...            | backup target syntax | Directory database target, see [Directory](backup_targets/directory.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | -               |
| LZIP_LEVEL                | int                  | Compression level for LZIP (0-9). Higher values mean better compression but slower speed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 0               |
| LZIP_THREADS              | int                  | Number of threads for LZIP compression (1-1024).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 1               |
| DISCORD_WEBHOOK_URL       | http url             | Webhook URL for fail messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | -               |
| DISCORD_MAX_MSG_LEN       | int                  | Maximum length of messages send to discord API. Sensible default used. Min `150` and max `10000`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 1500            |
| SLACK_WEBHOOK_URL         | http url             | Webhook URL for fail messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | -               |
| SLACK_MAX_MSG_LEN         | int                  | Maximum length of messages send to slack API. Sensible default used. Min `150` and max `10000`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 1500            |
| SMTP_HOST                 | string               | SMTP server host.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | -               |
| SMTP_FROM_ADDR            | string               | Email address that will send emails.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | -               |
| SMTP_PASSWORD             | string               | Password for `SMTP_FROM_ADDR`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | -               |
| SMTP_TO_ADDRS             | string               | Comma separated list of email addresses to send emails. For example `email1@example.com,email2@example.com`.                                                                                                                                                                                                                                                                                                                                                                                                                                                     | -               |
| SMTP_PORT                 | int                  | SMTP server port.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 587             |
| LOG_LEVEL                 | string               | Case sensitive const log level, must be one of `INFO`, `DEBUG`, `WARNING`, `ERROR`, `CRITICAL`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | INFO            |
| SUBPROCESS_TIMEOUT_SECS   | int                  | Indicates how long subprocesses can last. Note that all backups are run from shell in subprocesses. Defaults to 3600 seconds which should be enough for even big dbs to make backup of. Min `5` and max `86400` (24h).                                                                                                                                                                                                                                                                                                                                           | 3600            |
| LOG_FOLDER_PATH           | string               | Path to store log files, for local development `./logs`, in container `/var/log/ogion`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | /var/log/ogion  |
| SIGTERM_TIMEOUT_SECS      | int                  | Time in seconds on exit how long ogion will wait for ongoing backup threads before force killing them and exiting. Min `0` and max `86400` (24h).                                                                                                                                                                                                                                                                                                                                                                                                                | 3600            |
| OGION_CPU_ARCHITECTURE    | string               | CPU architecture, supported `amd64` and `arm64`. Docker container will set it automatically so probably do not change it.                                                                                                                                                                                                                                                                                                                                                                                                                                        | null            |
| DEBUG_AGE_SECRET_KEY      | string               | [AGE](https://github.com/FiloSottile/age) single secret key used to automatically decrypt when using `--restore` or `--restore-latest` command without asking for it in input. Only for debug, tests or when you know what you are doing.                                                                                                                                                                                                                                                                                                                        | amd64           |

<br>
<br>
